@import "variables";

$code-number-color: $deep-saffron;
$code-function-color: $blog-link-color;
$code-string-color: $tag-web;
$code-keyword-color: $bleu-de-france;
$code-variable-color: $tag-design;

$code-light-theme-background-color: rgba($lilac, .7);
$code-dark-theme-background-color: $background-color;
$code-light-theme-foreground-color: darken($code-light-theme-background-color, 70%);
$code-dark-theme-foreground-color: #b8b8b8;

$code-comment-color: rgba(lighten(#343642, 50%), .8);

pre {
  &[class*='language-'] {
    background: $code-light-theme-background-color;
    border-radius: .4rem;
    color: $code-light-theme-foreground-color;
    direction: ltr;
    hyphens: none;
    line-height: 1.375;
    tab-size: 4;
    text-align: left;
    transition: background-color .1s, color .1s;
    white-space: pre;
    word-break: normal;
    word-spacing: normal;

    &::selection,
    & ::selection {
      background: rgba($code-keyword-color, 0.2);
      text-shadow: none;
    }

    &:hover {
      background-color: $code-dark-theme-background-color;
      color: $code-dark-theme-foreground-color;
    }
  }
}


pre {
  &[class*='language-'] {
    margin: 2em 0;
    overflow: auto;
    padding: 1em;
  }

  & > code {
    &[class*='language-'] {
      background-color: transparent;
    }
  }
}

code {
  &[class*='language-'] {
    :not(pre) > & {
      background-color: $code-light-theme-background-color;
      border-radius: .3em;
      color: $code-light-theme-foreground-color;
      display: inline-block;
      padding: .1em .3em;
    }
  }
}

.token {
  &.comment,
  &.prolog,
  &.doctype,
  &.cdata,
  &.punctuation {
    color: $code-comment-color;
  }

  &.namespace {
    opacity: .7;
  }

  &.tag,
  &.operator,
  &.number {
    color: $code-number-color;
  }

  &.property,
  &.function {
    color: $code-function-color;
  }

  &.tag-id,
  &.selector,
  &.atrule-id {
    color: #eeebff;
  }

  &.builtin {
    color: $code-number-color;
  }

  &.class-name {
    color: $code-variable-color;
  }

  &.boolean,
  &.string,
  &.entity,
  &.url {
    color: $code-string-color;
  }

  &.attr-name {
    color: $code-function-color;
  }

  &.attr-value,
  &.keyword,
  &.control,
  &.directive,
  &.unit,
  &.statement,
  &.regex,
  &.atrule,
  &.placeholder,
  &.variable {
    color: $code-keyword-color;
  }

  &.deleted {
    text-decoration: line-through;
  }

  &.inserted {
    border-bottom: 1px dotted #eeebff;
    text-decoration: none;
  }

  &.italic {
    font-style: italic;
  }

  &.important, &.bold {
    font-weight: bold;
  }

  &.important {
    color: #c4b9fe;
  }

  &.entity {
    cursor: help;
  }
}


pre > code.highlight {
  outline: .4em solid $code-keyword-color;
  outline-offset: .4em;
}

.line-numbers .line-numbers-rows {
  border-right-color: #2c2937;
}

.line-numbers-rows > span:before {
  color: #3c3949;
}

.line-highlight {
  background: rgba(224, 145, 66, .2);
  background: linear-gradient(to right, rgba(224, 145, 66, .2) 70%, rgba(224, 145, 66, 0));
}
